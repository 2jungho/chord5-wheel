# λ¦¬ν™ν† λ§ μ‘μ—… μ μ°¨μ„

λ³Έ λ¬Έμ„λ” `md/λ¦¬ν™ν† λ§_λ©λ΅.md`μ μ μ• μ‚¬ν•­μ„ μ‹¤ν–‰ν•κΈ° μ„ν• κµ¬μ²΄μ μΈ λ‹¨κ³„λ³„ μ‘μ—… μ§€μΉ¨μ…λ‹λ‹¤. κ° λ‹¨κ³„λ” μ½”λ“ μ•μ •μ„±μ„ μµμ°μ„ μΌλ΅ ν•λ©°, λ³€κ²½ ν›„ κ²€μ¦ μ μ°¨λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.

## β… μ‚¬μ „ μ¤€λΉ„ (Preparation)
1.  **Git μƒνƒ ν™•μΈ λ° λΈλμΉ μƒμ„±**:
    *   ν„μ¬ μ‘μ—… λ””λ ‰ν† λ¦¬μ λ³€κ²½ μ‚¬ν•­μ„ μ»¤λ°‹ν•κ±°λ‚ μ¤νƒμ‹ν•©λ‹λ‹¤.
    *   (κ¶μ¥) λ¦¬ν™ν† λ§ μ „μ© λΈλμΉλ¥Ό μƒμ„±ν•μ§€ μ•κ³  λ©”μΈμ—μ„ μ‘μ—…ν•  κ²½μ°, κ° λ‹¨κ³„ μ™„λ£ μ‹λ§λ‹¤ μ»¤λ°‹μ„ μν–‰ν•©λ‹λ‹¤.
2.  **λΉλ“ ν™•μΈ**:
    *   λ¦¬ν™ν† λ§ μ‹μ‘ μ „, ν„μ¬ ν”„λ΅μ νΈκ°€ μ •μƒμ μΌλ΅ λΉλ“λκ³  μ‹¤ν–‰λλ”μ§€ ν™•μΈν•©λ‹λ‹¤.

---

## π— Phase 1: μ¤‘λ³µ μ½”λ“ ν†µν•© (UI Consolidation)
**λ©ν‘**: μ¤‘λ³µλ `ChordInfoSection` μ„μ ―μ„ ν•λ‚λ΅ ν†µν•©ν•κ³  λ¶ν•„μ”ν• νμΌμ„ μ κ±°ν•©λ‹λ‹¤.

### 1-1. `ChordInfoSection` ν†µν•©
1.  **νμΌ λΉ„κµ ν™•μΈ**:
    *   `lib/widgets/common/chord_info_section.dart` (Target)
    *   `lib/views/generator/widgets/chord_info_section.dart` (Source)
    *   *λ¶„μ„ κ²°κ³Ό*: Target νμΌμ΄ `degree` νλΌλ―Έν„°λ¥Ό μ¶”κ°€λ΅ μ§€μ›ν•λ―€λ΅ κΈ°λ¥μ μΌλ΅ μƒμ„ νΈν™λ¨. Source νμΌ μ‚­μ  κ°€λ¥.
2.  **μ°Έμ΅° μμ •**:
    *   `lib/views/generator/generator_view.dart` νμΌμ—μ„ `ChordInfoSection` import κ²½λ΅λ¥Ό `../../widgets/common/chord_info_section.dart`λ΅ λ³€κ²½ν•©λ‹λ‹¤.
3.  **νμΌ μ‚­μ **:
    *   `lib/views/generator/widgets/chord_info_section.dart` νμΌμ„ μ‚­μ ν•©λ‹λ‹¤.
4.  **κ²€μ¦**:
    *   `Generator` νƒ­(μ½”λ“ λ¶„μ„κΈ°)μ„ μ‹¤ν–‰ν•μ—¬ μ½”λ“ μ •λ³΄κ°€ μ •μƒμ μΌλ΅ ν‘μ‹λλ”μ§€ ν™•μΈν•©λ‹λ‹¤.

---

## π§  Phase 2: λΉ„μ¦λ‹μ¤ λ΅μ§ λ¶„λ¦¬ (Logic Extraction)
**λ©ν‘**: `ExplorerView`μ— ν•λ“μ½”λ”©λ ν™”μ„±ν•™ κ³„μ‚° λ° UI μΈν„°λ™μ… λ΅μ§μ„ λ³„λ„ λ¨λ“λ΅ λ¶„λ¦¬ν•©λ‹λ‹¤.

### 2-1. ν  ν„°μΉ λ΅μ§ λ¶„λ¦¬ (Interaction Logic)
1.  **μ„μ ― νμΌ μƒμ„±**:
    *   `lib/widgets/common/wheel/interactive_circle_of_fifths.dart` νμΌμ„ μƒμ„±ν•©λ‹λ‹¤.
2.  **μ½”λ“ μ΄λ™**:
    *   `ExplorerView` λ‚΄μ `_WheelSection` ν΄λμ¤μ™€ `_handleWheelTap` λ©”μ„λ“λ¥Ό μƒλ΅ μƒμ„±ν• νμΌλ΅ μ΄λ™ν•©λ‹λ‹¤.
    *   ν΄λμ¤λ…μ„ `InteractiveCircleOfFifths`λ΅ λ³€κ²½ν•κ³  `public`μΌλ΅ μ „ν™ν•©λ‹λ‹¤.
    *   `onKeySelected` μ½λ°±μ„ μ¶”κ°€ν•μ—¬ `MusicState` μμ΅΄μ„±μ„ μ κ±°ν•κ³  λ¶€λ¨ μ„μ ―μ—μ„ μƒνƒλ¥Ό μ£Όμ…λ°›λ„λ΅ κµ¬μ΅°λ¥Ό κ°μ„ ν•©λ‹λ‹¤.
3.  **λ·° μ μ©**:
    *   `ExplorerView`μ—μ„ `_WheelSection`μ„ `InteractiveCircleOfFifths`λ΅ κµμ²΄ν•©λ‹λ‹¤.

### 2-2. μ¤μΌ€μΌ λ…ΈνΈ λ¶„λ¥ λ΅μ§ μ΄λ™ (Theory Logic)
1.  **μ ν‹Έλ¦¬ν‹° ν•¨μ μ‘μ„±**:
    *   `lib/utils/theory_utils.dart` νμΌμ— `classifyScaleNotes` ν•¨μλ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.
    *   μ…λ ¥: `List<String> scaleNotes`, `String modeName`
    *   μ¶λ ¥: `Map<String, List<String>>` (μ: `{'chordTones': [...], 'otherNotes': [...]}`)
2.  **λ·° λ΅μ§ κµμ²΄**:
    *   `ExplorerView.build` λ©”μ„λ“ λ‚΄μ `for` λ£¨ν”„ λ΅μ§μ„ `TheoryUtils.classifyScaleNotes` νΈμ¶λ΅ λ€μ²΄ν•©λ‹λ‹¤.
3.  **κ²€μ¦**:
    *   `Explorer` νƒ­μ—μ„ μ¤μΌ€μΌ λ³€κ²½ μ‹ ν”„λ ›λ³΄λ“μ μ½”λ“ν†¤(μ§„ν• μƒ‰)κ³Ό κ·Έ μ™Έ λ…ΈνΈ(μ—°ν• μƒ‰) κµ¬λ¶„μ΄ μ΄μ „κ³Ό λ™μΌν•μ§€ ν™•μΈν•©λ‹λ‹¤.

---

## π“¦ Phase 3: νμΌ κµ¬μ΅° μ¬λ°°μΉ (Structural Cleanup)
**λ©ν‘**: μ¬μ‚¬μ© κ°€λ¥ν• μ„μ ―μ„ κ³µμ© ν΄λ”λ΅ μ΄λ™ν•μ—¬ `Studio` νƒ­ λ“±μ—μ„μ μ¬μ‚¬μ©μ„±μ„ ν™•λ³΄ν•©λ‹λ‹¤.

### 3-1. μ„μ ― μ΄λ™
1.  **νμΌ μ΄λ™**:
    *   `lib/views/explorer/diatonic_list.dart` -> `lib/widgets/common/theory/diatonic_list.dart`
    *   `lib/views/explorer/caged_list.dart` -> `lib/widgets/common/theory/caged_list.dart`
    *   `lib/views/explorer/mode_selector.dart` -> `lib/widgets/common/wheel/mode_selector.dart`
2.  **Import μμ •**:
    *   `ExplorerView` λ° κ΄€λ ¨ νμΌλ“¤μ import κ²½λ΅λ¥Ό μΌκ΄„ μμ •ν•©λ‹λ‹¤.

---

## π§ μµμΆ… μ κ²€ (Final Verification)
1.  **μ•± μ „μ²΄ μ‹¤ν–‰ ν…μ¤νΈ**:
    *   `Explorer`, `Generator`, `Studio` νƒ­μ„ μνν•λ©° κΈ°λ¥ νμ† μ—¬λ¶€λ¥Ό ν™•μΈν•©λ‹λ‹¤.
    *   νΉν 5λ„κ¶ ν  ν„°μΉ, λ¨λ“ λ³€κ²½, ν”„λ ›λ³΄λ“ λ λ”λ§μ΄ μ •μƒμ μΈμ§€ μ¤‘μ μ μΌλ΅ λ΄…λ‹λ‹¤.
2.  **λΉλ“ ν…μ¤νΈ**:
    *   `flutter build web` λλ” `flutter build windows`λ¥Ό μν–‰ν•μ—¬ μ»΄νμΌ μ—λ¬κ°€ μ—†λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

---

## π“ μ‘μ—… κΈ°λ΅
μ‘μ—… μ™„λ£ ν›„ λ³€κ²½λ νμΌ λ©λ΅κ³Ό νΉμ΄μ‚¬ν•­μ„ `chat_history`μ— κΈ°λ΅ν•©λ‹λ‹¤.
